rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow anonymous writes ONLY to the waitlist collection with strict validation.
    match /waitlist/{email} {
      allow create, update: if
        request.time < timestamp.date(2026, 3, 1) &&               // temporary open window
        request.auth == null &&                                    // no auth required
        request.resource.data.email is string &&
        request.resource.data.email.matches('^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$') &&
        request.resource.data.email == email;                      // docId must equal email

      allow read: if false;                                        // never expose the list publicly
    }
  }
}



